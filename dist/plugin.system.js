System.register(["@builder.io/react","@builder.io/app-context","@emotion/styled","@builder.io/sdk","@emotion/core","mobx-react","react","@material-ui/core","@material-ui/icons","mobx"],(function(e,t){var n={},r={},o={},i={},u={},a={},l={},s={},c={},p={};return{setters:[function(e){n.Builder=e.Builder},function(e){r.default=e.default},function(e){o.default=e.default},function(){},function(e){u.jsx=e.jsx},function(e){a.useObserver=e.useObserver},function(e){l.default=e.default,l.useEffect=e.useEffect,l.useReducer=e.useReducer,l.useRef=e.useRef,l.useState=e.useState},function(e){s.Button=e.Button,s.Checkbox=e.Checkbox,s.Chip=e.Chip,s.FormControl=e.FormControl,s.FormControlLabel=e.FormControlLabel,s.IconButton=e.IconButton,s.InputLabel=e.InputLabel,s.MenuItem=e.MenuItem,s.Select=e.Select,s.TextField=e.TextField},function(e){c.Clear=e.Clear},function(e){p.observable=e.observable,p.observe=e.observe}],execute:function(){e((()=>{"use strict";var e={404:e=>{e.exports=r},522:e=>{e.exports=n},461:e=>{e.exports=i},576:e=>{e.exports=u},992:e=>{e.exports=o},509:e=>{e.exports=s},420:e=>{e.exports=c},853:e=>{e.exports=p},979:e=>{e.exports=a},726:e=>{e.exports=l}},t={};function d(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,d),o.exports}d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var f={};return(()=>{d.r(f);var e=d(522),t=d(404);const n=JSON.parse('{"UU":"@scalefast/builder.io"}');var r=d(992),o=r.default.div({display:"flex",alignItems:"center",flexDirection:"column"}),i=r.default.div({display:"flex",alignItems:"start",flexDirection:"row",width:"100%",gap:10}),u=r.default.div({display:"flex",alignItems:"start",flexDirection:"column",width:"100%",gap:10}),a=function(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},l=(d(461),function(){for(var e=[],n=0,r=t.default.models.result;n<r.length;n++){var o=r[n];0==o.archived&&"data"==o.kind&&"page-components"!=o.name&&e.push({id:o.id,name:o.name,kind:o.kind,displayName:o.displayName})}return e}),s=function(){var e,r=null===(e=t.default.user.organization.value.settings.plugins)||void 0===e?void 0:e.get(n.UU);return{componentPage:null==r?void 0:r.get("componentPage"),componentName:null==r?void 0:r.get("componentName")}},c=d(576),p=d(979),v=d(726),m=d(509),y=[{key:"text",type:"Text",required:!1,helperText:""},{key:"boolean",type:"Boolean",required:!1,helperText:""},{key:"number",type:"Number",required:!1,helperText:""},{key:"select",type:"Select",required:!1,helperText:""},{key:"reference",type:"Reference",required:!1,helperText:""},{key:"assets_image",type:"Assets Image",required:!1,helperText:""}],h=[{id:"submenu",title:"Subcategory Navigation",options:[{key:"item",type:"custom_list",subOptions:[{key:"name",type:"text"},{key:"url",type:"text"},{key:"image",type:"text"}]}]}],x=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}l((r=r.apply(e,t||[])).next())}))},b=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};const g=function(){function e(){this.baseUrl="https://cdn.builder.io/api/"}return e.prototype.getModel=function(e,t,n){return x(this,void 0,void 0,(function(){var r;return b(this,(function(o){switch(o.label){case 0:return r="".concat(this.baseUrl,"v3/content/").concat(e,"?apiKey=").concat(t.user.apiKey),n&&(r+="&".concat(n)),[4,t.httpCache.getAsync(r,{headers:t.user.authHeaders})];case 1:return[2,o.sent().value]}}))}))},e.prototype.getContent=function(e,t,n,r){return x(this,void 0,void 0,(function(){var o;return b(this,(function(i){switch(i.label){case 0:return o="".concat(this.baseUrl,"v3/content/").concat(e,"/").concat(t,"?apiKey=").concat(n.user.apiKey),r&&(o+="&".concat(r)),[4,n.httpCache.getAsync(o,{headers:n.user.authHeaders})];case 1:return[2,i.sent().value]}}))}))},e}();var k=function(e){return(0,c.jsx)(m.FormControl,{fullWidth:!0},(0,c.jsx)(m.TextField,{fullWidth:!0,label:a(e.value.key),onChange:function(t){return e.onChange(t.target.value)},value:e.currentValue}))},C=d(420),j=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},w=function(e){var t=function(){var t,n,r=[];return"object"==typeof(null===(t=e.currentValue)||void 0===t?void 0:t.options[e.value.key])&&(r=null===(n=e.currentValue)||void 0===n?void 0:n.options[e.value.key]),r}(),n=(0,v.useState)(t),r=n[0],o=n[1];return(0,v.useEffect)((function(){}),[]),(0,c.jsx)(u,{id:"column-item-list"},r.map((function(t,n){return(0,c.jsx)(u,{id:"column-item-list"+n,css:{backgroundColor:"var(--off-background-4)",borderRadius:"4px",padding:"12px"}},e.value.subOptions&&e.value.subOptions.map((function(i){return(0,c.jsx)(k,{css:{marginTop:"30px"},value:i,onChange:function(t){return function(t,n,i){o((function(e){var r=e;return r[n][i]=t,r})),e.onChange(r)}(t,n,i.key)},currentValue:t[i.key],context:e.context,renderEditor:e.renderEditor})})),(0,c.jsx)(m.Button,{"aria-label":"delete",size:"small",onClick:function(t){return i=n,u=r.filter((function(e,t){return i!=t})),o(u),void e.onChange(u);var i,u}},(0,c.jsx)(C.Clear,null)," Delete"))})),(0,c.jsx)(i,{css:{marginTop:5,marginBottom:10}},(0,c.jsx)(m.Button,{onClick:function(){if(e.value.subOptions){var t={};e.value.subOptions.map((function(e){t[e.key]=""})),o((function(e){return j(j([],e,!0),[t],!1)}))}},variant:"text"},"+ New item")))},T=d(853),_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)},O={set_selected_component:function(e,t){return _(_({},e),{selectedComponent:t.selectedComponent})},set_list_components:function(e,t){return _(_({},e),{customPageComps:t.customPageComps})},set_list_components_and_selected:function(e,t){return _(_({},e),{customPageComps:t.customPageComps,selectedComponent:t.selectedComponent})},set_type_change:function(e,t){return _(_({},e),{selectedId:t.selectedId,selectedComponent:t.selectedComponent})}},S=function(e,t){var n,r=null!==(n=O[t.type])&&void 0!==n?n:null;return r?r(e,t):e},F=function(){return F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},F.apply(this,arguments)},I=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}l((r=r.apply(e,t||[])).next())}))},q=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},P=function(e){var t=e.context,n=new g,r=e.value?e.value.toJSON():void 0,i={customPageComps:[],selectedComponent:void 0,selectedId:r?r.id:""},l=(0,v.useRef)(!0),s=(0,v.useReducer)(S,i),d=s[0],f=s[1],y=(0,v.useState)(r),x=y[0],b=y[1],k=T.observable.map({},{deep:!1});function C(e){"update"!==e.type&&"add"!==e.type||O("object"==typeof e.newValue?e.newValue.toJSON():e.newValue,e.name.toString())}function j(t){return I(this,void 0,void 0,(function(){return q(this,(function(r){switch(r.label){case 0:return[4,n.getContent(t.model,t.id,e.context,"query.published.$eq=published&limit=50&cachebust=true")];case 1:return[2,r.sent()]}}))}))}function _(e){var t=d.customPageComps.find((function(t){return t.id==e.target.value}));if(t){var n={id:t.id,title:t.title,options:{}};f({type:"set_type_change",selectedId:e.target.value,selectedComponent:t}),b(n)}}function O(e,t){b((function(n){var r;if(!n)return n;if(null==e){var o=n.options;return delete o[t],F(F({},n),{options:o})}return F(F({},n),{options:F(F({},n.options),(r={},r[t]=e,r))})}))}return(0,v.useEffect)((function(){!function(){I(this,void 0,void 0,(function(){var e,t,n,r,o,i;return q(this,(function(u){switch(u.label){case 0:if(!(e=x))return[3,4];t=0,n=Object.keys(e.options),u.label=1;case 1:return t<n.length?(r=n[t],"object"==typeof(o=e.options[r])&&"@type"in o&&"@builder.io/core:Reference"===o["@type"]?[4,j(o)]:[3,3]):[3,4];case 2:(i=u.sent())&&(o.value=i,e.options[r]=o),u.label=3;case 3:return t++,[3,1];case 4:return k.replace(e?e.options:{}),(0,T.observe)(k,C),[2]}}))}))}()})),(0,v.useEffect)((function(){!function(){I(this,void 0,void 0,(function(){var e,r,o;return q(this,(function(i){switch(i.label){case 0:return[4,n.getModel("page-components",t,"query.published.$eq=published&limit=50&cachebust=true&fields=data,id,name")];case 1:return e=i.sent(),r=Array.isArray(e.results)?function(e){return e.map((function(e){var t,n,r,o,i,u=null!==(n=null===(t=e.data)||void 0===t?void 0:t.name)&&void 0!==n?n:"";return{id:u,options:null!==(o=null===(r=e.data)||void 0===r?void 0:r.options)&&void 0!==o?o:[],title:null!==(i=e.name)&&void 0!==i?i:u}}))}(e.results):[],r=r.concat(h),o=d.selectedId?r.find((function(e){return e.id==d.selectedId})):void 0,f(r&&o?{type:"set_list_components_and_selected",selectedComponent:o,customPageComps:r}:{type:"set_list_components",customPageComps:r}),[2]}}))}))}()}),[]),(0,v.useEffect)((function(){l.current?l.current=!1:e.onChange(x)}),[x]),(0,p.useObserver)((function(){return(0,c.jsx)(v.default.Fragment,null,(0,c.jsx)(o,{css:{marginTop:5,marginBottom:10,width:"100%"}},(0,c.jsx)(m.FormControl,{fullWidth:!0},(0,c.jsx)(m.InputLabel,{id:"input-component-template-label"},"Select custom component"),(0,c.jsx)(m.Select,{labelId:"input-component-template-label",id:"input-component-template",css:{marginTop:30},value:d.selectedId,onChange:_},d.customPageComps.map((function(e){return(0,c.jsx)(m.MenuItem,{value:e.id},e.title)})))),d.selectedComponent&&k&&(0,c.jsx)("div",{css:{width:"100%",marginTop:15}},e.renderEditor({object:k,fields:(t=d.selectedComponent,n=[],t.options.map((function(e){"reference"==e.type&&n.push(function(e){var t,n,r,o;return{"@type":"@builder.io/core:Field",type:"reference",name:e.key,friendlyName:a(e.key),required:null!==(t=e.required)&&void 0!==t&&t,helperText:null!==(n=e.helperText)&&void 0!==n?n:"",modelId:null!==(o=null===(r=e.extraOptions)||void 0===r?void 0:r.modelId)&&void 0!==o?o:"",model:"",showTemplatePicker:!0,autoFocus:!1,simpleTextOnly:!1,disallowRemove:!1,broadcast:!1,bubble:!1,hideFromUI:!1,hideFromFieldsEditor:!1,permissionsRequiredToEdit:"",advanced:!1,onChange:"",showIf:"",mandatory:!1,hidden:!1,noPhotoPicker:!1,subFields:[],meta:{},behavior:"",copyOnAdd:!0,defaultCollapsed:!1,supportsAiGeneration:!1}}(e)),"text"==e.type&&n.push(function(e){var t,n;return{"@type":"@builder.io/core:Field",type:"text",name:e.key,friendlyName:a(e.key),required:null!==(t=e.required)&&void 0!==t&&t,helperText:null!==(n=e.helperText)&&void 0!==n?n:""}}(e)),"number"==e.type&&n.push(function(e){var t,n;return{"@type":"@builder.io/core:Field",type:"number",name:e.key,friendlyName:a(e.key),required:null!==(t=e.required)&&void 0!==t&&t,helperText:null!==(n=e.helperText)&&void 0!==n?n:""}}(e)),"assets_image"==e.type&&n.push(function(e){var t,n;return{"@type":"@builder.io/core:Field",type:"file",name:e.key,friendlyName:a(e.key),required:null!==(t=e.required)&&void 0!==t&&t,helperText:null!==(n=e.helperText)&&void 0!==n?n:"",showTemplatePicker:!0,autoFocus:!1,simpleTextOnly:!1,disallowRemove:!1,broadcast:!1,bubble:!1,hideFromUI:!1,hideFromFieldsEditor:!1,permissionsRequiredToEdit:"",advanced:!1,copyOnAdd:!1,onChange:"",showIf:"",mandatory:!1,hidden:!1,noPhotoPicker:!1,allowedFileTypes:["jpeg","png","svg","webp","gif"],subFields:[]}}(e)),"boolean"==e.type&&n.push(function(e){var t,n;return{"@type":"@builder.io/core:Field",type:"boolean",name:e.key,friendlyName:a(e.key),required:null!==(t=e.required)&&void 0!==t&&t,helperText:null!==(n=e.helperText)&&void 0!==n?n:""}}(e)),"select"==e.type&&void 0!==e.values&&e.values.length>0&&n.push(function(e){var t,n,r;return{"@type":"@builder.io/core:Field",type:"select",name:e.key,friendlyName:a(e.key),required:null!==(t=e.required)&&void 0!==t&&t,helperText:null!==(n=e.helperText)&&void 0!==n?n:"",enum:null!==(r=e.values)&&void 0!==r?r:[],model:"",modelId:"",showTemplatePicker:!0,autoFocus:!1,simpleTextOnly:!1,disallowRemove:!1,broadcast:!1,bubble:!1,hideFromUI:!1,hideFromFieldsEditor:!1,permissionsRequiredToEdit:"",advanced:!1,copyOnAdd:!1,onChange:"",showIf:"",mandatory:!1,hidden:!1,noPhotoPicker:!1,subFields:[],meta:{}}}(e))})),n),onChange:function(e){var t,n=(t=e,JSON.parse(JSON.stringify(t)));console.log(n)}})),(0,c.jsx)(u,null,d.selectedComponent&&d.selectedComponent.options.map((function(t){if("custom_list"==t.type)return(0,c.jsx)(w,{value:t,onChange:function(e){return O(e,t.key)},currentValue:x,context:e.context,renderEditor:e.renderEditor})})))));var t,n}))},N=function(){return N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},N.apply(this,arguments)},E=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},B={set_key:function(e,t){return N(N({},e),{key:t.key})},set_required:function(e,t){return N(N({},e),{required:t.required})},set_helper_text:function(e,t){return N(N({},e),{helperText:t.helperText})},set_type:function(e,t){return N(N({},e),{type:t.t})},set_values:function(e,t){return N(N({},e),{values:t.values})},set_tag:function(e,t){var n;return N(N({},e),{values:E(E([],null!==(n=e.values)&&void 0!==n?n:[],!0),[t.tag],!1)})},set_extra_options:function(e,t){return N(N({},e),{extraOptions:t.extraOptions})}},R=function(e,t){var n,r=null!==(n=B[t.type])&&void 0!==n?n:null;return r?r(e,t):e},A=function(e){var t,n,r,o={key:e.opt.key,type:e.opt.type,required:null!==(t=e.opt.required)&&void 0!==t&&t,helperText:null!==(n=e.opt.helperText)&&void 0!==n?n:"",values:null!==(r=e.opt.values)&&void 0!==r?r:[]};e.opt.extraOptions&&(o.extraOptions=e.opt.extraOptions);var a=(0,v.useReducer)(R,o),s=a[0],d=a[1],f=(0,v.useState)(""),h=f[0],x=f[1],b=(0,v.useState)("Ã¬nput-component-prop-".concat(e.index))[0],g=l();return(0,v.useEffect)((function(){e.onChange("update_option",e.index,s)}),[s]),(0,p.useObserver)((function(){return(0,c.jsx)(i,{css:{marginTop:5,marginBottom:10,background:"var(--off-background-2)",padding:"10px 20px",borderRadius:10}},(0,c.jsx)(u,null,(0,c.jsx)(i,null,(0,c.jsx)("div",null,(0,c.jsx)(m.FormControl,null,(0,c.jsx)(m.TextField,{label:"Key",value:s.key,onChange:function(e){return t=e.target.value,void d({type:"set_key",key:t});var t},id:b+"-value"}))),(0,c.jsx)("div",null,(0,c.jsx)(m.InputLabel,{css:{display:"block",paddingBottom:10,fontSize:14,fontWeight:500},id:b+"-label"},"Type"),(0,c.jsx)(m.Select,{label:"Type",id:b,onChange:function(e){return t=e.target.value,s.values&&"select"!=t&&d({type:"set_values",values:[]}),null==s.extraOptions&&"reference"==t&&d({type:"set_extra_options",extraOptions:{modelId:""}}),void d({type:"set_type",t});var t},value:s.type},y.map((function(e){return(0,c.jsx)(m.MenuItem,{value:e.key},e.type)})))),"select"==s.type&&(0,c.jsx)(u,null,(0,c.jsx)("div",null,(0,c.jsx)(m.FormControl,null,(0,c.jsx)(m.TextField,{label:"Values (insert value a push Enter)",value:h,onKeyDown:function(e){"Enter"==e.key&&(d({type:"set_tag",tag:h}),x(""))},onChange:function(e){return x(e.target.value)},defaultValue:"",id:b+"-values"}))),s.values&&(0,c.jsx)("div",null,s.values.map((function(e,t){return(0,c.jsx)(m.Chip,{css:{marginRight:"5px",marginBottom:"5px"},label:e,onDelete:function(){return function(e){var t=s.values.filter((function(t,n){return e!=n}));d({type:"set_values",values:t})}(t)},deleteIcon:(0,c.jsx)(C.Clear,null)})})))),"reference"==s.type&&(0,c.jsx)(u,null,(0,c.jsx)("div",null,(0,c.jsx)(m.InputLabel,{css:{display:"block",paddingBottom:10,fontSize:14,fontWeight:500},id:b+"-reference"},"Data Model"),(0,c.jsx)(m.Select,{label:"Data model",id:b,onChange:function(e){return t=e.target.value,void((n=g.find((function(e){return e.name==t})))&&d({type:"set_extra_options",extraOptions:{modelId:n.id,modelName:n.name}}));var t,n},value:s.extraOptions.modelName},g.map((function(e){return(0,c.jsx)(m.MenuItem,{value:e.name},e.displayName.length>0?e.displayName:e.name)})))))),(0,c.jsx)(i,{css:{marginTop:10}},(0,c.jsx)(u,null,(0,c.jsx)(m.FormControl,{css:{width:"100%",flexShrink:0,flexGrow:1}},(0,c.jsx)(m.TextField,{label:"Helper text (max 200 characters)",value:s.helperText,inputProps:{maxLength:200},onChange:function(e){return t=e.target.value,void d({type:"set_helper_text",helperText:t});var t},id:b+"-hint"})),(0,c.jsx)("div",{css:{width:"100%",flexShrink:0,flexGrow:1}},(0,c.jsx)(m.FormControlLabel,{control:(0,c.jsx)(m.Checkbox,{checked:s.required,onChange:function(e){return t=e.target.checked,void d({type:"set_required",required:t});var t}}),label:"Make option as required"}))))),(0,c.jsx)("div",null,(0,c.jsx)(m.IconButton,{"aria-label":"delete",size:"small",onClick:function(t){return e.onChange("delete_option",e.index)}},(0,c.jsx)(C.Clear,null))))}))},U=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},M=function(e){var t=e.value?e.value.map((function(e){return e.toJSON()})):[],n=(0,v.useState)(t),r=n[0],o=n[1],u=e.context;function a(){var t=U(U([],r,!0),[{key:"",type:"",required:!1,helperText:""}],!1);o(t),e.onChange(t)}function l(t,n,i){var u=r;"update_option"==t&&i?(u[n]=i,o(u)):"delete_option"==t&&(u=u.filter((function(e,t){return n!=t})),o(u)),e.onChange(u)}return(0,p.useObserver)((function(){return(0,c.jsx)("div",null,r.map((function(e,t){return(0,c.jsx)(i,{css:{marginTop:5,marginBottom:10}},(0,c.jsx)(A,{opt:e,index:t,onChange:l,context:u}))})),(0,c.jsx)(i,{css:{marginTop:5,marginBottom:10}},(0,c.jsx)(m.Button,{onClick:a,variant:"text"},"+ New")))}))},V=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}l((r=r.apply(e,t||[])).next())}))},D=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};e.Builder.register("plugin",{id:n.UU,name:"ESW Plugin",settings:[{name:"componentPage",type:"text",defaultValue:"page-creator",helperText:"Data model name for page model"},{name:"componentName",type:"text",defaultValue:"page-components",helperText:"Data model name for custom components"}],ctaText:"Save",onSave:function(e){return V(this,void 0,void 0,(function(){return D(this,(function(n){switch(n.label){case 0:return[4,e.updateSettings({hasConfig:!0})];case 1:return n.sent(),t.default.dialogs.alert("Plugin settings saved."),[2]}}))}))}}),e.Builder.register("app.onLoad",(function(e){return V(void 0,[e],void 0,(function(e){var t,r=e.triggerSettingsDialog;return D(this,(function(e){switch(e.label){case 0:return(t=s()).componentPage&&t.componentName?[3,2]:[4,r(n.UU)];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})),e.Builder.register("editor.onLoad",(function(t){t.safeReaction,t.updatePreviewUrl,s().componentName&&(e.Builder.registerEditor({name:"Custom Page Component",component:P}),e.Builder.registerEditor({name:"Custom Map",component:M}))}))})(),f})())}}}));